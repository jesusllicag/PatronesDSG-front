<div>
  <app-dynamic-breadcrumb
    [items]="breadcrumbItems()"
    [currentPage]="pageTitle()"
  />

  <div class="rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]">
    <!-- Header -->
    <div class="border-b border-gray-200 px-5 py-4 dark:border-gray-800 sm:px-6">
      <h3 class="text-lg font-semibold text-gray-800 dark:text-white">
        {{ pageTitle() }}
      </h3>
      <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">
        @if (isEditing()) {
          Modifica los datos de la colección
        } @else {
          Completa los datos para crear una nueva colección en {{ subcommunity()?.name }}
        }
      </p>
    </div>

    <!-- Form -->
    <form (ngSubmit)="onSubmit()" class="p-5 sm:p-6">
      <div class="max-w-2xl space-y-5">
        <!-- Hierarchy Info -->
        <div class="rounded-lg bg-gray-50 p-4 dark:bg-gray-800/50">
          <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-6">
            <!-- Community -->
            <div class="flex items-center gap-3">
              <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-brand-100 text-brand-500 dark:bg-brand-500/20">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                </svg>
              </div>
              <div>
                <p class="text-xs text-gray-500 dark:text-gray-400">Comunidad</p>
                <p class="font-medium text-gray-800 dark:text-white">{{ community()?.name }}</p>
              </div>
            </div>

            <svg class="hidden sm:block w-4 h-4 text-gray-300 dark:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>

            <!-- Subcommunity -->
            <div class="flex items-center gap-3">
              <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-success-100 text-success-500 dark:bg-success-500/20">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/>
                </svg>
              </div>
              <div>
                <p class="text-xs text-gray-500 dark:text-gray-400">Subcomunidad</p>
                <p class="font-medium text-gray-800 dark:text-white">{{ subcommunity()?.name }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Name -->
        <div>
          <app-label for="name">Nombre de la colección</app-label>
          <app-input-field
            id="name"
            type="text"
            placeholder="Ej: Ingeniería de Sistemas, MBA, Grupo GITI"
            [value]="formData().name"
            (valueChange)="updateFormField('name', $event.toString())"
          />
        </div>

        <!-- Description -->
        <div>
          <app-label for="description">Descripción</app-label>
          <app-text-area
            id="description"
            placeholder="Describe brevemente el contenido de esta colección"
            [rows]="4"
            [value]="formData().description"
            (valueChange)="updateFormField('description', $event)"
          />
        </div>

        <!-- Actions -->
        <div class="flex items-center gap-3 pt-4 border-t border-gray-200 dark:border-gray-700">
          <app-button variant="primary" type="submit">
            @if (isEditing()) {
              Guardar Cambios
            } @else {
              Crear Colección
            }
          </app-button>
          <app-button variant="outline" type="button" (btnClick)="onCancel()">
            Cancelar
          </app-button>
        </div>
      </div>
    </form>
  </div>
</div>
